syntax = "proto3";

option go_package = "discord/gen/proto/schema";
package protoschema;

import "schema/user.proto";
import "schema/message.proto";

message DirectMessage {
  int32 id = 1;
  int32 sender_id = 2;
  int32 recipient_id = 3;
  string content = 4;
  bool is_read = 5;
  bool is_edited = 6;
  repeated MessageAttachment attachments = 7;
  int32 reply_to_message_id = 8;
  int64 created_at = 9;
  int64 updated_at = 10;
}

message DMChannel {
  int32 id = 1;
  repeated int32 participant_ids = 2; // 2 for DM, more for group DM
  string name = 3; // Only for group DMs
  string icon = 4; // Only for group DMs
  int32 owner_id = 5; // Only for group DMs
  int32 last_message_id = 6;
  int64 last_message_at = 7;
  int64 created_at = 8;
}

message DMParticipant {
  int32 id = 1;
  int32 dm_channel_id = 2;
  int32 user_id = 3;
  int64 last_read_message_id = 4;
  int64 joined_at = 5;
}
